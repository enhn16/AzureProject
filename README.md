# AzureProject
2025년 겨울방학 [클라우드 기반 AI 활용 전략 교육 및 팀프로젝트 with MS Azure]에서 진행한 단기 프로젝트

## 기획안
### 주요 타겟
- 자취생을 비롯한 1인 가구
- 요리 초보
  
### 기능
- 입력 재료 기반 레시피 추천
    - 사용하고 싶은 재료 입력 ex) 계란, 양배추
    - 해당 재료 내에서 만들 수 있는 레시피 출력
    - 추가로 원하는 부분 입력 (채팅 기능)
    ex) 10살 아이도 먹을거라 많이 맵지 않았으면 좋겠어
    - 사용자 요구 반영한 레시피 재출력
    - 미보유 요리도구(에어프라이어, 오븐 등)와 난이도 선택 가능하도록 함
- 식재료 상태 판단
    - 사진 업로드(시든 야채, 과일 등)
    - 양호/보통/폐기 세 단계로 상태 판단 
    - 폐기 상태를 제외한 재료의 경우 레시피 생성 페이지로 연동 가능한 버튼 생성. 클릭 시 레시피 추천으로 넘어감 (이 재료는 자동으로 추가되고 추가 재료 입력할 수 있도록 함)

### 구현 방안
- 레시피 추천은 Azure의 LLM을 이용해 생성하도록 함 (Open AI)
→ 각 식재료의 조리 방안에 기초한 다양한 레시피를 생성할 수 있다는 장점
    - 몇 가지 예시를 데이터 기본 레시피 형태 제공해 출력 시 말투와 형태 고정
    - 프롬프트 설정 중요 (모든 재료 사용이 아닌 일부 재료만 사용 가능. 단, 식재료 상태 판단에서 넘어온 경우 해당 식재료는 필수 사용)
    - 너무 창의적인 결과를 예방하기 위해 만개의레시피에서 제공하는 무료 레시피 데이터 참고 (AI Search)
- 식재료 상태 판단의 경우 여러 사진과 답을 주고 테스트 해볼 필요 있음
    - 사진으로만 판단하기 애매한 경우 사용자에게 추가적인 확인을 하도록 조언
- 웹 구성은 Gradio 이용 → 제한된 시간 내에 일정 퀄리티 이상의 웹 생성 가능

## 프롬프트 설계 
본 서비스는 **Microsoft Azure OpenAI (GPT-4o)** 를 기반으로 동작하며, 할루시네이션 방지와 책임감 있는 AI 원칙을 준수하기 위해 정교한 시스템 프롬프트를 사용

### 📝 1인분 뚝딱 레시피 생성
사용자의 냉장고 재료, 제외 도구, 요리 실력 등을 고려하여 RAG(검색) 기반의 맞춤형 레시피를 생성

```text
[System Message]
너는 자취 전문 셰프다. 밥/면/빵을 멋대로 추가하지 말고, 출력 형식을 엄수하라.

[User Message]
냉장고 재료: {ingredients}
제외할 조리도구: {exclude_tools}
조리 시간 조건: {cook_time}
난이도: {difficulty}
추가 요청사항: {request_text}

# Task: 1인분 맞춤 레시피 생성
위 조건에 맞는 레시피를 만들어줘. 인사말 없이 바로 '# 🍽️ 요리명'부터 시작해.
- **분량 엄수:** 반드시 '1인분' 기준.
- **도구 제한:** 사용자가 못 쓴다고 명시한 도구 절대 사용 금지.
- **재료 제한:** 사용자가 입력한 재료만 사용. **(밥, 면, 빵, 밀가루 자동 추가 금지)**
- **기본 양념:** 간장, 설탕, 소금, 고추장 등 기본 양념만 허용.
- **형식:** 요리 이름 밑의 설명은 **절대 헤더(#)나 볼드(**) 없이 평문**으로 작성.

[레시피 출력 양식]
## 🍽️ (요리 이름)
(요리 특징 평문 설명)
---
### 🛒 준비물
- (재료 리스트)
---
### 👨‍🍳 조리 단계
1. (단계별 설명)
2. ...
---
### 💡 셰프의 꿀팁
- (팁 내용)
```

### 🔄 레시피 수정 및 반영
사용자가 "국물 요리로 바꿔줘", "더 맵게 해줘" 등의 추가 요청을 했을 때, 기존의 맥락(재료 제한 등)을 유지하면서 레시피를 수정

```text
[System Message]
너는 자취 전문 셰프다. 기존 레시피를 바탕으로 사용자의 수정 요청을 반영하라.

[User Message]
# Task: 기존 레시피 수정 (Refinement)
너는 지금 사용자가 보고 있는 레시피를 **수정**해야 한다. 완전히 새로 만들지 말고, 기존 레시피의 흐름을 유지하되 **추가 요청사항**을 반영해라.

[기존 레시피 내용]
{current_recipe}

[사용자의 수정 요청]
"{extra_request}"

[제약 사항 (유지)]
1. 재료: {ingredients} (밥, 면, 빵 멋대로 추가 금지)
2. 도구: {exclude_tools} 사용 금지
3. 출력 형식: 기존과 동일하게 유지 (설명 줄에 헤더/볼드 금지)

위 내용을 바탕으로 수정된 완벽한 레시피를 다시 출력해줘.
```

### 📸 식재료 안심 스캐너
사용자가 업로드한 식재료 사진을 분석하여 신선도를 판별

```text
[System Message]
너는 식재료 상태 진단 전문가이다.

[User Message]
# Task: 식재료 상태 진단
[출력 양식]
🥬 **식재료 상태 진단**
- **재료명:** (재료 이름)
- **신선도 등급:** (양호/보통/폐기)
- **외관상의 특징:** (상세 설명)
- **조리 시 주의점:** (손질 방법 및 보관 팁)
```

## 캐릭터
### 베지 (Bege)
<img src="./check.png" width="200">
<img src="./cooking.png" width="200">
